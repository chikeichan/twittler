<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <style>
    body {
      background-color: rgb(159, 213, 252);
    }

    div {
      background-color: white;
      margin-top: 5px;
      margin-left: auto ;
      margin-right: auto ;
      text-align: left;
      width: 50%;
      height: auto;
      border-radius: 5px;
      padding: 5px;
      box-shadow: 2px 2px rgb(76, 145, 203);
    }

    p#time {
      text-align: right;
      margin: 20px 5px 0px 0px;
      font-size: 12px;
      color: rgb(153, 153, 153);
    }

    p.title {
      margin-left: auto;
      margin-right: auto;
      margin-bottom: -10px;
      margin-top: -5px;
      text-align: left;
      width: 50%;
      padding: 5px;
      font-size: 50px;
      color: rgb(255, 255, 255);
      font-family: fantasy;
      text-shadow: -2px -2px rgb(107, 107, 107),
                    2px -2px rgb(107, 107, 107),
                   -2px 2px rgb(107, 107, 107),
                    2px 2px rgb(107, 107, 107);

    }

    p#username, p#msg {
      display: inline-block;
    }

    </style>
  </head>
  <body>

    <p class="title">Twittler</p>

    <p class="main"></p>


    <script>
      var getTimeStamp = function(){
          var now = new Date().toString().split(' ');
          var day = 0;
          var month = 1;
          var date = 2;
          var year = 3;
          var time = 4;

          var timestamp = now[time] + " - " + now[day] + " " + now[month] + " " + now[date] + ", " + now[year]

          return timestamp;
        };

      $(document).ready(function(){
        var $body = $('.main');
        //$body.html('');



        var oldTweets = -1;

        var tweetIt = function(){
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            //var $tweet = $('<div></div>');
            var timestamp = getTimeStamp();
            //$tweet.text('@' + tweet.user + ': ' + tweet.message);
            //$tweet.data("timestamp", timestamp);
            //$tweet.appendTo($body);

            var tweetmsg = "<div class='message' id='"+index+"'>@<p id='username'>"+tweet.user+"</p>: <p id='msg'>"+tweet.message+"</p>";
            $body.append(tweetmsg);

            $('div').last().append('<p id="time">'+timestamp+'</p>')


            index -= 1;
            oldTweets++
          }
        }

        tweetIt();
        
        var tweetingIt = setInterval(function(){
            var index = streams.home.length-1;
            if(index > oldTweets){
              for(var i = oldTweets+1; i<=index; i++){
                var tweet = streams.home[index];
                //var $tweet = $('<div></div>');
                var timestamp = getTimeStamp();
                //$tweet.text('@' + tweet.user + ': ' + tweet.message + ":" + index);
                //$tweet.data("timestamp", timestamp);
                //$tweet.prependTo($body);

                var tweetmsg = "<div class='message' id='"+index+"'>@<p id='username'>"+tweet.user+"</p>: <p id='msg'>"+tweet.message+"</p>";
                $body.prepend(tweetmsg);

                $('div').first().append('<p id="time">'+timestamp+'</p>')


                index -= 1;
                oldTweets++;
              }
            }
          },200);
        
        setTimeout(function(){
          clearInterval(tweetingIt);
        }, 5000)

      });

    </script>
  </body>
</html>
